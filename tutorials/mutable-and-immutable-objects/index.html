<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 38 &ndash; Mutable vs Immutable Objects - Ruby Learning</title>
  <meta name="description" content="A beautiful static website for learning Ruby">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Modern fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Syntax highlighting -->
  <link rel="stylesheet" href="/css/prism-monokai.css?v=1763562581">
  <link rel="stylesheet" href="/css/enhanced-code.css?v=1763562581">
  
  <!-- Tutorial styles -->
  <link rel="stylesheet" href="/css/tutorials.css?v=1763562581">
  <link rel="stylesheet" href="/css/badges.css?v=1763562581">
  
  <!-- CodeMirror Import Map -->
  <script type="importmap">
  {
    "imports": {
      "codemirror": "https://cdn.jsdelivr.net/npm/codemirror@6.0.1/dist/index.js",
      "@codemirror/state": "https://cdn.jsdelivr.net/npm/@codemirror/state@6.0.0/dist/index.js",
      "@codemirror/view": "https://cdn.jsdelivr.net/npm/@codemirror/view@6.0.0/dist/index.js",
      "@codemirror/language": "https://cdn.jsdelivr.net/npm/@codemirror/language@6.0.0/dist/index.js",
      "@codemirror/commands": "https://cdn.jsdelivr.net/npm/@codemirror/commands@6.0.0/dist/index.js",
      "@codemirror/search": "https://cdn.jsdelivr.net/npm/@codemirror/search@6.0.0/dist/index.js",
      "@codemirror/autocomplete": "https://cdn.jsdelivr.net/npm/@codemirror/autocomplete@6.0.0/dist/index.js",
      "@codemirror/lint": "https://cdn.jsdelivr.net/npm/@codemirror/lint@6.0.0/dist/index.js",
      "@codemirror/lang-javascript": "https://cdn.jsdelivr.net/npm/@codemirror/lang-javascript@6.0.0/dist/index.js",
      "@codemirror/theme-one-dark": "https://cdn.jsdelivr.net/npm/@codemirror/theme-one-dark@6.0.0/dist/index.js",
      "@lezer/common": "https://cdn.jsdelivr.net/npm/@lezer/common@1.0.0/dist/index.js",
      "@lezer/highlight": "https://cdn.jsdelivr.net/npm/@lezer/highlight@1.0.0/dist/index.js",
      "@lezer/lr": "https://cdn.jsdelivr.net/npm/@lezer/lr@1.0.0/dist/index.js",
      "style-mod": "https://cdn.jsdelivr.net/npm/style-mod@4.0.0/src/style-mod.js",
      "w3c-keyname": "https://cdn.jsdelivr.net/npm/w3c-keyname@2.2.4/+esm"
    }
  }
  </script>
  
  <!-- ES Module Shims polyfill for older browsers -->
  <script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js" crossorigin="anonymous"></script>
</head>
<body>
  

<header class="site-header">
  <div class="container">
    <a href="/" class="site-logo">
      <span class="logo-icon tinted-diamond" aria-hidden="true">&#x1F48E;</span>
      <span class="logo-text">Ruby</span>
      <span class="logo-accent">Learning</span>
    </a>
    <nav class="site-nav">
      
      <ul>
        
          
            
            
            
            
            
            <li>
              <a href="/" >Home</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/pages/about/" >About</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/tutorials/#ruby-track" >Learn Ruby</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/tutorials/#rails-track" >Learn Rails</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/tutorials/" >Tutorials</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/blog/" >Blog</a>
            </li>
          
            
            
            
            
            
            <li>
              <a href="/pages/resources/" >Resources</a>
            </li>
          
        
      </ul>
    </nav>
    <button class="menu-toggle" aria-label="Toggle menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
  </div>
</header>

  
  <main class="site-content">
    <div class="container">
      <div class="tutorial-wrapper">
  
    <!-- themes/rubylearning/includes/_breadcrumbs.html -->

<nav class="breadcrumbs">
  <ol>
    <li><a href="/">Home</a></li>
    
    <li><a href="/tutorials/">Tutorials</a></li>
    <li>Chapter 38 &ndash; Mutable vs Immutable Objects</li>
    
  </ol>
</nav>

  

  <article class="tutorial">
    <header class="tutorial-header">
      <h1>
        Chapter 38 &ndash; Mutable vs Immutable Objects
        
          <span class="difficulty difficulty-beginner">Beginner</span>
        
      </h1>
      
        <p class="tutorial-summary">Know which Ruby objects change in place (strings, arrays) and which do not (numbers, symbols), and how `freeze` locks state.</p>
      
    </header>

    <div class="tutorial-content">
      <div class='markdown'><p>
> Adapted from Satish Talim's "Mutable and Immutable Objects" lesson.

Ruby stores some objects as mutable containers (strings, arrays, hashes) and others as immutable values (numbers, symbols). Understanding the difference prevents surprises when multiple variables reference the same object.

<h3>Mutable example: strings</h3>

<pre class="language-ruby" data-executable="true"><code class="language-ruby">
name = "Ruby"
alias = name

name.upcase!
puts alias  #=> "RUBY"
</code></pre>

<code>alias</code> changed because both variables point to the same mutable string object.

<h3>Immutable example: numbers</h3>

<pre class="language-ruby" data-executable="true"><code class="language-ruby">
count = 10
other = count

count += 5
puts other  #=> 10
</code></pre>

Numeric literals are immutable immediate values; arithmetic always returns a new object.

<h3>Symbols are immutable</h3>

Symbols are allocated once and never modified:

<pre class="language-ruby" data-executable="true"><code class="language-ruby">
status = :ok
# :ok is frozen automatically; no bang methods mutate it
</code></pre>

<h3>Freezing objects</h3>

Call <code>freeze</code> to prevent further modification:

<pre class="language-ruby" data-executable="true"><code class="language-ruby">
config = { retries: 3 }.freeze
config[:timeout] = 10  # raises FrozenError
</code></pre>

Frozen strings are common when <code># frozen_string_literal: true</code> appears at the top of a file.

<h3>Practice checklist</h3>
<ul><li>[ ] Demonstrate how two arrays referencing the same object both mutate after <code>&lt;&lt;</code>.</li></ul><ul><li>[ ] Freeze a string and rescue the <code>FrozenError</code> raised when attempting to append to it.</li></ul><ul><li>[ ] Explain why symbol keys in hashes don't need cloning--they're immutable.</li></ul><ul><li>[ ] Use <code>dup</code> to copy a mutable object before modifying it.</li></ul>

Next: continue into Flow Control & Collections, now mindful of which objects mutate in place.

<h4>Practice 1 - Shared references and mutation</h4>

<p><strong>Goal:</strong> Show how two arrays referencing the same object mutate together after <code>&lt;&lt;</code>.</p>

<pre class="language-ruby"
     data-executable="true"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="0"
     data-test="out = output.string; lines = out.lines.map(&:strip); lines.any? { |l| l.downcase.include?('before:') } && lines.any? { |l| l.downcase.include?('after:') }"><code class="language-ruby">
# TODO: Create one array, assign it to two variables, push a value via
# one variable, and print both before and after to show they point to
# the same object.
</code></pre>
<div class="practice-feedback"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="0"></div>

<script type="text/plain"
        data-practice-solution="rl:chapter:/tutorials/mutable-and-immutable-objects:0">
nums = [1, 2]
alias_ref = nums

puts "before: nums=#{nums.inspect}, alias_ref=#{alias_ref.inspect}"

nums << 3

puts "after:  nums=#{nums.inspect}, alias_ref=#{alias_ref.inspect}"
</script>

<h4>Practice 2 - Freezing and FrozenError</h4>

<p><strong>Goal:</strong> Freeze a string and rescue the <code>FrozenError</code> when appending to it.</p>

<pre class="language-ruby"
     data-executable="true"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="1"
     data-test="out = output.string; lines = out.lines.map(&:strip); lines.any? { |l| l.downcase.include?('frozenerror') }"><code class="language-ruby">
# TODO: Freeze a string and attempt to append to it, rescuing the
# FrozenError and printing a short message.
</code></pre>
<div class="practice-feedback"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="1"></div>

<script type="text/plain"
        data-practice-solution="rl:chapter:/tutorials/mutable-and-immutable-objects:1">
greeting = "hello".freeze

begin
  greeting << " world"
rescue FrozenError => e
  puts "Caught FrozenError: #{e.message}"
end
</script>

<h4>Practice 3 - Immutable symbol keys</h4>

<p><strong>Goal:</strong> Explain why symbol keys in hashes don't need cloning.</p>

<pre class="language-ruby"
     data-executable="true"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="2"
     data-test="out = output.string; lines = out.lines.map(&:strip); lines.any? { |l| l.include?(':name') } && lines.any? { |l| l.downcase.include?('immutable') }"><code class="language-ruby">
# TODO: Create a hash with symbol keys, access them, and print a
# sentence noting that symbols are immutable and reused, so the keys
# don't need cloning.
</code></pre>
<div class="practice-feedback"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="2"></div>

<script type="text/plain"
        data-practice-solution="rl:chapter:/tutorials/mutable-and-immutable-objects:2">
person = { name: "Rubyist", city: "Pune" }

puts "Keys: #{person.keys.inspect}"
puts "name: #{person[:name]}"
puts "Symbols are immutable and reused, so hash keys like :name don't need cloning."
</script>

<h4>Practice 4 - Duplicating before modifying</h4>

<p><strong>Goal:</strong> Use <code>dup</code> to copy a mutable object before modifying it.</p>

<pre class="language-ruby"
     data-executable="true"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="3"
     data-test="out = output.string; lines = out.lines.map(&:strip); lines.any? { |l| l.downcase.include?('original:') } && lines.any? { |l| l.downcase.include?('copy:') }"><code class="language-ruby">
# TODO: Start with a single array or string, create a dup, mutate the
# copy, and print both original and copy to show only the copy changed.
</code></pre>
<div class="practice-feedback"
     data-practice-chapter="rl:chapter:/tutorials/mutable-and-immutable-objects"
     data-practice-index="3"></div>

<script type="text/plain"
        data-practice-solution="rl:chapter:/tutorials/mutable-and-immutable-objects:3">
original = [1, 2, 3]
copy = original.dup

copy << 4

puts "original: #{original.inspect}"
puts "copy:     #{copy.inspect}"
</script>
</p></div>
    </div>

    
      <nav class="tutorial-nav">
        
          
          
          <a class="tutorial-nav__link tutorial-nav__link--prev" href="/tutorials/ruby-syntactic-sugar/">
            <span class="icon-arrow icon-arrow--left" aria-hidden="true">&lt;</span>
            <span>Chapter 37: Ruby Syntactic Sugar</span>
          </a>
        
        
          
          
          <a class="tutorial-nav__link tutorial-nav__link--next" href="/tutorials/object-serialization/">
            <span>Chapter 39: Object Serialization (Marshal)</span>
            <span class="icon-arrow" aria-hidden="true">&gt;</span>
          </a>
        
      </nav>
    

    
      <!-- themes/rubylearning/includes/_related_tutorials.html -->


<div class="related-tutorials">
  <h2>Related Tutorials</h2>
  <ul>
    
    
    <li>
      <a href="/tutorials/ruby-symbols/">
        <span class="related-icon" aria-hidden="true">&gt;</span>
        <span>Ruby Symbols</span>
      </a>
    </li>
    
    
    <li>
      <a href="/tutorials/ruby-open-classes/">
        <span class="related-icon" aria-hidden="true">&gt;</span>
        <span>Ruby Open Classes</span>
      </a>
    </li>
    
  </ul>
</div>


    
  </article>

  <div class="ruby-console-drawer">
    <button class="ruby-console-toggle" type="button" aria-expanded="false">
      <span class="ruby-console-toggle-label">Ruby console</span>
      <span class="ruby-console-toggle-icon" aria-hidden="true">&#9660;</span>
    </button>
    <div class="ruby-console-body">
      <div class="ruby-irb" data-ruby-console="true">
        <div class="ruby-irb-output" aria-live="polite"></div>
        <form class="ruby-irb-form">
          <span class="ruby-irb-prompt">mrc(main):001&gt;</span>
          <div class="ruby-irb-input-wrapper">
            <span class="ruby-irb-caret" aria-hidden="true"></span>
            <pre class="ruby-irb-ghost"></pre>
            <textarea
              class="ruby-irb-input"
              placeholder="Enter Ruby code here..."
              autocomplete="off"
              rows="1"
            ></textarea>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

    </div>
  </main>
  
  

<footer class="site-footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-about">
        <h3>Ruby Learning</h3>
        <p>A modern resource for learning the Ruby programming language through practical tutorials and examples.</p>
      </div>
      <div class="footer-links">
        <h3>Quick Links</h3>
        
        <ul>
          
            
              
              
              
              
              
              <li><a href="/" >Home</a></li>
            
              
              
              
              
              
              <li><a href="/pages/about/" >About</a></li>
            
              
              
              
              
              
              <li><a href="/tutorials/#ruby-track" >Learn Ruby</a></li>
            
              
              
              
              
              
              <li><a href="/tutorials/#rails-track" >Learn Rails</a></li>
            
              
              
              
              
              
              <li><a href="/tutorials/" >Tutorials</a></li>
            
              
              
              
              
              
              <li><a href="/blog/" >Blog</a></li>
            
              
              
              
              
              
              <li><a href="/pages/resources/" >Resources</a></li>
            
          
        </ul>
      </div>
      <div class="footer-resources">
        <h3>Ruby Resources</h3>
        
        <ul>
          
            
              
              
              
              <li><a href="https://ruby-lang.org" target="_blank" rel="noopener">Ruby Official Site</a></li>
            
              
              
              
              <li><a href="https://ruby-doc.org" target="_blank" rel="noopener">Ruby Documentation</a></li>
            
              
              
              
              <li><a href="https://rubygems.org" target="_blank" rel="noopener">RubyGems</a></li>
            
          
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
        <p>
          &copy; 2025 Ruby Learning.
          Built with
          <a href="https://github.com/metacritical/typophic" target="_blank" rel="noopener">Typophic</a>.
          Made with <span aria-hidden="true">&#10084;&#65039;</span> by
          <a href="https://codemismatch.com" target="_blank" rel="noopener">codemismatch.com</a>.
        </p>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src="/js/prism.js?v=1763562581"></script>
  <script src="/js/prism-ruby.js?v=1763562581"></script>
  <script src="/js/prism-markdown.js?v=1763562581"></script>
  <script src="/js/code-enhancements.js?v=1763562581"></script>
  <script src="/js/tutorial-enhancements.js?v=1763562581"></script>
  <script src="/js/github-pages-fix.js?v=1763562581"></script>
  <script src="/js/site.js?v=1763562581"></script>
</body>
</html>
