<!DOCTYPE html>
<html lang="<%= site["language"] || "en" %>">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title><%= page["title"] %> - <%= site["title"] %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Source+Sans+Pro:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="<%= asset_path('themes/hugo-serif-typophic/css/style.css') %>">
  
  <% if page["description"] %>
  <meta name="description" content="<%= page["description"] %>"/>
  <% end %>
</head>
<body class="page page-post">
  <div class="wrapper">
    <header class="site-header">
      <div class="header-full-width">
        <div class="logo">
          <a href="<%= url_for('/') %>">
            <img height="36px" alt="<%= site["title"] %>" src="<%= asset_path('themes/hugo-serif-typophic/images/screenshot.png') %>" />
          </a>
        </div>
        <nav class="main-menu">
          <ul>
            <li><a href="<%= url_for('/') %>">Home</a></li>
            <li><a href="<%= url_for('pages/about/') %>">About</a></li>
            <li><a href="<%= url_for('tutorials/') %>">Tutorials</a></li>
            <li><a href="<%= url_for('blog/') %>">Blog</a></li>
          </ul>
        </nav>
      </div>
    </header>
    
    <main class="main">
      <div class="container-fluid py-5">
        <div class="row">
          <!-- Main content -->
          <div class="col-12 col-lg-8">
            <article class="blog-post">
              <header class="post-header mb-4">
                <h1 class="post-title"><%= page["title"] %></h1>
                <% if page["date"] %>
                  <div class="post-meta text-muted mb-3">
                    <time datetime="<%= page["date_iso"] %>"><%= page["date"]&.strftime(site["date_format"] || "%B %-d, %Y") %></time>
                    <% if page["tags"] && page["tags"].any? %>
                      <span class="mx-2">â€¢</span>
                      <% page["tags"].each do |tag| %>
                        <span class="badge bg-secondary me-1"><%= tag %></span>
                      <% end %>
                    <% end %>
                  </div>
                <% end %>
              </header>
              
              <div class="post-content mb-5">
                <%= content %>
              </div>
              
              <% if page["tags"] && page["tags"].any? %>
                <div class="post-tags mb-5">
                  <h3>Tags:</h3>
                  <% page["tags"].each do |tag| %>
                    <a href="#" class="badge bg-primary text-decoration-none me-2"><%= tag %></a>
                  <% end %>
                </div>
              <% end %>
              
              <!-- Related Posts -->
              <% if site["collections"] && site["collections"]["posts"] && page["tags"] && page["tags"].any? %>
                <% related_posts = site["collections"]["posts"].select do |post| %>
                  <% next false if post["url"] == page["url"] %>
                  <% post_tags = post["tags"] || [] %>
                  <% common_tags = (page["tags"] & post_tags) %>
                  <% common_tags.any? %>
                <% end.first(3) %>
                
                <% if related_posts.any? %>
                  <div class="related-posts mb-5">
                    <h3>Related Posts</h3>
                    <div class="row">
                      <% related_posts.each do |post| %>
                        <div class="col-12 col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">
                                <a href="<%= url_for(post["permalink"]) %>" class="text-decoration-none"><%= post["title"] %></a>
                              </h5>
                              <% if post["date"] %>
                                <p class="card-text">
                                  <small class="text-muted"><%= post["date"]&.strftime("%b %-d, %Y") %></small>
                                </p>
                              <% end %>
                              <% if post["tags"] && post["tags"].any? %>
                                <div class="mt-2">
                                  <% post["tags"].first(3).each do |tag| %>
                                    <span class="badge bg-secondary me-1"><%= tag %></span>
                                  <% end %>
                                </div>
                              <% end %>
                            </div>
                          </div>
                        </div>
                      <% end %>
                    </div>
                  </div>
                <% end %>
              <% end %>
            </article>
          </div>
          
          <!-- Sidebar -->
          <div class="col-12 col-lg-4">
            <aside class="blog-sidebar">
              <!-- Search -->
              <div class="sidebar-widget mb-4">
                <h3>Search</h3>
                <form class="search-form">
                  <input type="text" class="form-control" placeholder="Search blog posts...">
                </form>
              </div>
              
              <!-- Categories/Tags -->
              <div class="sidebar-widget mb-4">
                <h3>Categories</h3>
                <ul class="list-unstyled">
                  <li><a href="#">Ruby</a> <span class="badge bg-secondary">12</span></li>
                  <li><a href="#">Rails</a> <span class="badge bg-secondary">8</span></li>
                  <li><a href="#">Best Practices</a> <span class="badge bg-secondary">5</span></li>
                  <li><a href="#">Tutorials</a> <span class="badge bg-secondary">7</span></li>
                </ul>
              </div>
              
              <!-- Archives by Year -->
              <% if site["collections"] && site["collections"]["posts"] %>
                <div class="sidebar-widget mb-4">
                  <h3>Archives</h3>
                  <% archives = {} %>
                  <% site["collections"]["posts"].each do |post| %>
                    <% if post["date"] %>
                      <% year = post["date"].year %>
                      <% archives[year] = (archives[year] || 0) + 1 %>
                    <% end %>
                  <% end %>
                  
                  <ul class="list-unstyled">
                    <% archives.sort.reverse.each do |year, count| %>
                      <li><a href="#"><%= year %></a> <span class="badge bg-secondary"><%= count %></span></li>
                    <% end %>
                  </ul>
                </div>
              <% end %>
              
              <!-- Tag Cloud -->
              <div class="sidebar-widget mb-4">
                <h3>Tag Cloud</h3>
                <div class="tag-cloud">
                  <a href="#" class="tag-link">ruby</a>
                  <a href="#" class="tag-link">rails</a>
                  <a href="#" class="tag-link">tutorials</a>
                  <a href="#" class="tag-link">best-practices</a>
                  <a href="#" class="tag-link">testing</a>
                  <a href="#" class="tag-link">performance</a>
                  <a href="#" class="tag-link">gems</a>
                  <a href="#" class="tag-link">syntax</a>
                </div>
              </div>
              
              <!-- Recent Posts -->
              <% if site["collections"] && site["collections"]["posts"] %>
                <div class="sidebar-widget">
                  <h3>Recent Posts</h3>
                  <ul class="list-unstyled">
                    <% site["collections"]["posts"].sort_by { |post| post["date"] || Time.new(1970) }.reverse.first(5).each do |post| %>
                      <li class="mb-2">
                        <a href="<%= url_for(post["permalink"]) %>"><%= post["title"] %></a>
                        <% if post["date"] %>
                          <small class="d-block text-muted"><%= post["date"]&.strftime("%b %-d, %Y") %></small>
                        <% end %>
                      </li>
                    <% end %>
                  </ul>
                </div>
              <% end %>
            </aside>
          </div>
        </div>
      </div>
    </main>
    
    <footer class="site-footer">
      <div class="footer-full-width">
        <div class="container">
          <div class="row">
            <div class="col-12 col-md-4 mb-4 mb-md-0">
              <h3>Ruby Learning</h3>
              <p>A comprehensive resource for learning Ruby programming through practical tutorials and examples.</p>
            </div>
            <div class="col-12 col-md-4 mb-4 mb-md-0">
              <h3>Quick Links</h3>
              <ul class="list-unstyled">
                <li><a href="<%= url_for('/') %>">Home</a></li>
                <li><a href="<%= url_for('pages/about/') %>">About</a></li>
                <li><a href="<%= url_for('tutorials/') %>">Tutorials</a></li>
                <li><a href="<%= url_for('blog/') %>">Blog</a></li>
              </ul>
            </div>
            <div class="col-12 col-md-4">
              <h3>Connect</h3>
              <p>Follow us for the latest Ruby tutorials and updates.</p>
            </div>
          </div>
          <div class="row mt-4">
            <div class="col-12 text-center">
              <p>&copy; <%= Time.now.year %> <%= site["title"] %>. All rights reserved.</p>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>
  
  <script type="text/javascript" src="<%= asset_path('themes/hugo-serif-typophic/js/scripts.js') %>"></script>
  <script src="<%= asset_path('js/site.js') %>"></script>
</body>
</html>
